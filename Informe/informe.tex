%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Definición del tipo de documento.                                           %
% Posibles tipos de papel: a4paper, letterpaper, legalpapper                  %
% Posibles tamaños de letra: 10pt, 11pt, 12pt                                 %
% Posibles clases de documentos: article, report, book, slides                %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\documentclass[a4paper,10pt]{article}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Los paquetes permiten ampliar las capacidades de LaTeX.                     %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Paquete para inclusión de gráficos.
\usepackage{graphicx}

% Paquete para definir la codificación del conjunto de caracteres usado
% (latin1 es ISO 8859-1).
\usepackage[latin1]{inputenc}

% Paquete para definir el idioma usado.
\usepackage[spanish]{babel}

%Paquete para poder insetar código de programación
\usepackage{listings}

% Título principal del documento.
\title{		\textbf{Trabajo Práctico #0: Infraestructura básica}}

% Información sobre los autores.
\author{	Leandro Huemul Desuque, \textit{Padrón Nro. 95836}                     \\
            \texttt{ desuqueleandro@gmail.com }                                              \\
            Cristian Nicolas Gonzalez, \textit{Padrón Nro. 94719}                     \\
            \texttt{ cristian3629@mail.com }                                              \\[2.5ex]
            \normalsize{1er. Cuatrimestre de 2017}                       \\
            \normalsize{66.20 Organización de Computadoras}                             \\
            \normalsize{Facultad de Ingeniería, Universidad de Buenos Aires}            \\
       }
\date{}



\begin{document}



% Inserta el título.
\maketitle

% Quita el número en la primer página.
\thispagestyle{empty}

% Resumen
\begin{abstract}
Se desarrolló un programa en C que codifica y decodifica información en formato base 64.
El objetivo del presente trabajo fue familiarizarse con las herramientas básicas, tales como GXEmul y LaTeX.
\end{abstract}

\section{Introducción}
Se implementó en C un codificador/decodificador de información en base 64.
Base 64 es un sistema de numeración posicional que usa 64 como base. Es la mayor potencia de dos que puede ser representada usando únicamente los caracteres imprimibles de ASCII. Esto ha propiciado su uso para codificación de correos electrónicos, PGP y otras aplicaciones.
Como puede entenderse, se trata de un sistema simple por lo que resulta una buena elección si el objetivo final no es construir un sistema elaborado sino familiarizarse con el software necesario para ello.

% \textit{66.20 Organización de Computadoras} ESTO PONE TEXTO EN CURSIVA

\section{Desarrollo}
\subsection{Documentación del código C}
La documentacion de las funciones se detalla por orden de aparición en el código fuente.

\subsubsection{\texttt{help}}
\texttt{help} despliega la ayuda para el usuario final.

\subsubsection{\texttt{version}}
\texttt{version} informa la version del código fuente.

\subsubsection{\texttt{CharToBinary}}
\texttt{CharToBinary} convierte cada caracter que ingresa a una cadena de bits.

\subsubsection{\texttt{encodeBase64}}
\texttt{encodeBase64} se encarga de codificar a base 64 utilizando la posicion que se le envía y comparándola con una tabla de códigos.

\subsubsection{\texttt{BinaryToDecimal}}
\texttt{BinaryToDecimal} convierte la cadena parcial de bits a la posicion decimal de mi tabla de codigos base64.

\subsubsection{\texttt{fileOpen}}
\texttt{fileOpen} se encarga de abrir archivos.

\subsubsection{\texttt{fileClose}}
\texttt{fileClose} cierra el archivo abierto.

\subsubsection{\texttt{fileGetSize}}
\texttt{fileGetSize} calcula el tamaño del archivo ingresado.

\subsubsection{\texttt{fileRead}}
\texttt{fileRead} se encarga de parsear el archivo y cargar los datos a un buffer.

\subsubsection{\texttt{fileProcessing}}
\texttt{fileProcessing} se encarga de procesar el archivo de texto, haciendo el llamado para la apertura, lectura y eventual cierre del fichero.

\subsubsection{\texttt{bufferOpen}}
\texttt{bufferOpen} es una función que reserva espacio en memoria de un tamaño arbitrario.

\subsubsection{\texttt{bufferClose}}
\texttt{bufferClose} es una función que libera el espacio en memoria pedido por el usuario.

\subsubsection{\texttt{PosicionToBinary}}
\texttt{PosicionToBinary} se encarga de convertir una posicion de la tabla de códigos base 64 a su correspondiente cadena binaria.

\subsubsection{\texttt{decodeBase64}}
\texttt{decodeBase64} devuelve la posicion correspondiente a la tabla de códigos según el caractere ingresado.

\subsubsection{\texttt{decode}}
\texttt{decode} se encarga de traducir una cadena en base 64.

\subsubsection{\texttt{grabarArchivo}}
\texttt{grabarArchivo} guarda la información procesada en un archivo de salida.

\subsubsection{\texttt{setStdinBuffer}}
\texttt{setStdinBuffer} reserva espacio en memoria para almacenar la información ingresada por entrada estandar (STDIN).

\subsubsection{\texttt{TODO}}
\texttt{TODO} es una funció

\subsubsection{\texttt{TODO}}
\texttt{TODO} es una función

\subsubsection{\texttt{TODO}}
\texttt{TODO} es una funció

\subsubsection{\texttt{Especificaciones}}

%\\begin{figure}[!htp]
%\\begin{center}
%\\includegraphics[width=0.4\textwidth]{imagenStack.eps}
%\\end{center}
%\\caption{Stack de la función vecinos} \label{fig:stack}
%\\end{figure}

FALTA, TODO.

\subsection{Dificultades}
FALTA, TODO.

\section{Compilación}
FALTA, TODO.

Los argumentos utilizados para la compilación son los siguientes:

\begin{description}
\item[-c] Compila el código fuente pero no corre el linker. Genera el código objeto.

\item[-o] Especifica el archivo de salida (ya sea un archivo objeto, ejecutable, ensamblado).

\item[-Wall] Activa los mensajes de warning.

\item[-I] Agrega el directorio especificado a la lista de directorios buscados para los archivos header
\end{description}


Los argumentos para la generación del código assembly con los siguientes:


\begin{description}
	\item[-Wall] Activa los mensajes de warning.
	
	\item[-std=c99] Se selecciona el estándar C99.
	
	\item[-O0] No se aplica optimizaciones por parte del compilador
	
	\item[-S]  detiene al compilador luego de generar el assembly.
	
	\item[-mrnames] indica al compilador que
	genere la salida utilizando nombre de registro en lugar
	de número de registro
	
	
\end{description}



\section{Resultados}

\subsection{Código Assembly}
Acá tenemos el código assembly generado desde el emulador gxemul:
\begin{lstlisting}
	.file	1 "tp0.c"
.section .mdebug.abi32
.previous
.abicalls
.rdata
.align	2
$LC0:
.ascii	"Usage:\n"
.ascii	" tp0 -h\n"
.ascii	" tp0 -V\n"
.ascii	" tp0 [options]\n"
.ascii	"Options:\n"
.ascii	" -V, --version\t\tPrint version and quit.\n"
.ascii	" -h, --help\t\tPrint this information.\n"
.ascii	" -i, --input\t\tLocation of the input file.\n"
.ascii	" -o, --output\t\tLocation of the output file.\n"
.ascii	" -a, --action\t\tProgram action: encode (default) or dec"
.ascii	"ode.\n"
.ascii	"Examples:\n"
.ascii	" tp0 -a encode -i ~/input -o ~/output\n"
.ascii	" tp0 -a decode\n\000"
.text
.align	2
.globl	help
.ent	help
help:
.frame	$fp,40,$ra		# vars= 0, regs= 3/0, args= 16, extra= 8
.mask	0xd0000000,-8
.fmask	0x00000000,0
.set	noreorder
.cpload	$t9
.set	reorder
subu	$sp,$sp,40
.cprestore 16
sw	$ra,32($sp)
sw	$fp,28($sp)
sw	$gp,24($sp)
move	$fp,$sp
la	$a0,$LC0
la	$t9,printf
jal	$ra,$t9
move	$sp,$fp
lw	$ra,32($sp)
lw	$fp,28($sp)
addu	$sp,$sp,40
j	$ra
.end	help
.size	help, .-help
.rdata
.align	2
$LC1:
.ascii	"Encoder/Decoder Base64\n"
.ascii	"66.20 Organizacion de Computadoras FIUBA\n\000"
.text
.align	2
.globl	version
.ent	version
version:
.frame	$fp,40,$ra		# vars= 0, regs= 3/0, args= 16, extra= 8
.mask	0xd0000000,-8
.fmask	0x00000000,0
.set	noreorder
.cpload	$t9
.set	reorder
subu	$sp,$sp,40
.cprestore 16
sw	$ra,32($sp)
sw	$fp,28($sp)
sw	$gp,24($sp)
move	$fp,$sp
la	$a0,$LC1
	la	$t9,printf
jal	$ra,$t9
move	$sp,$fp
lw	$ra,32($sp)
lw	$fp,28($sp)
addu	$sp,$sp,40
j	$ra
.end	version
.size	version, .-version
.rdata
.align	2
$LC2:
.ascii	"\000"
.space	7
.text
.align	2
.globl	CharToBinary
.ent	CharToBinary
CharToBinary:
.frame	$fp,72,$ra		# vars= 32, regs= 3/0, args= 16, extra= 8
.mask	0xd0000000,-8
.fmask	0x00000000,0
.set	noreorder
.cpload	$t9
.set	reorder
subu	$sp,$sp,72
.cprestore 16
sw	$ra,64($sp)
sw	$fp,60($sp)
sw	$gp,56($sp)
move	$fp,$sp
move	$v0,$a0
sw	$a1,76($fp)

\end{lstlisting}

\subsection{Pruebas}
\texttt{./tp0\\
Man\\
TWFu\\
}\\
\texttt{./tp0\\
M\\
TQ==\\
}\\
\texttt{./tp0\\
Ma\\
TWE=\\
}\\
\texttt{./tp0\\
any carnal pleasure.\\
YW55IGNhcm5hbCBwbGVhc3VyZS4=\\
}
\\
\texttt{./tp0\\
	any carnal pleasure\\
	YW55IGNhcm5hbCBwbGVhc3VyZQ==\\
}
\\

\texttt{./tp0\\
any carnal pleasur\\
YW55IGNhcm5hbCBwbGVhc3Vy\
}
\\ 
\texttt{./tp0\\
	any carnal pleasu\\
	YW55IGNhcm5hbCBwbGVhc3U=\
}
\\
\texttt{./tp0\\
	any carnal pleas\\
	YW55IGNhcm5hbCBwbGVhcw==\
}
\\

\texttt{./tp0 -i emptyFile.txt\\
	\\
}
\\


\section{Conclusiones}
FALTA, TODO.

% Citas bibliográficas.
\begin{thebibliography}{99}

\bibitem{GXemul} Sitio web de GXemul http://gxemul.sourceforge.net/

\end{thebibliography}

\end{document}
